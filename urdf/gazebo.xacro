<?xml version="1.0" ?>
<robot name="diff_drive" xmlns:xacro="http://ros.org/wiki/xacro">
<!--define robot gazebo-->
        <gazebo reference="chassis">
        <material>Gazebo/Aluminium</material>
    </gazebo>

    <gazebo reference="left_wheel">
        <material>Gazebo/Blue</material>
    </gazebo>

    <gazebo reference="right_wheel">
        <material>Gazebo/Blue</material>
    </gazebo>

        <gazebo reference="above_base_caster">
        <material>Gazebo/Yellow</material>
    </gazebo>

    <gazebo reference="right_base_caster">
        <material>Gazebo/Yellow</material>
    </gazebo>

        <gazebo reference="left_base_caster">
        <material>Gazebo/Yellow</material>
    </gazebo>

        <gazebo reference="back_base_caster">
        <material>Gazebo/Yellow</material>
    </gazebo>

        <gazebo reference="caster_wheel">
        <material>Gazebo/Red</material>
    </gazebo>

        <gazebo reference="face_link">
        <material>Gazebo/Red</material>
    </gazebo>

        <gazebo reference="laser">
        <material>Gazebo/Orange</material>
    </gazebo>
<!--robot control-->
<gazebo>
  <plugin filename="ignition-gazebo-diff-drive-system"
        name="ignition::gazebo::systems::DiffDrive">
    <alwaysOn>true</alwaysOn>
    <updateRate>100</updateRate>
    <left_joint>left_wheel_joint</left_joint>
    <right_joint>right_wheel_joint</right_joint>
    <wheel_separation>0.46</wheel_separation>
    <wheel_radius>0.05</wheel_radius>
    <max_wheel_torque>20</max_wheel_torque>
    <command_topic>cmd_vel</command_topic>
    <odometry_topic>odom</odometry_topic>
    <odometry_frame>odom</odometry_frame>
    <robot_base_frame>base_footprint</robot_base_frame>
  </plugin>
</gazebo>
  <!-- Caster wheel -->
  <gazebo reference="caster_wheel">
    <mu1>0.0</mu1>
    <mu2>0.0</mu2>

    <kp>1000000.0</kp>
    <kd>100.0</kd>
    <minDepth>0.001</minDepth>
    <maxVel>1.0</maxVel>
  </gazebo>

    <!-- LIDAR sensor cho Gazebo Fortress -->
    <gazebo reference="laser">
        <sensor name="laser" type="gpu_ray">
            <frame_id>laser</frame_id>
            <always_on>true</always_on>
            <visualize>true</visualize>
            <update_rate>5</update_rate>
            <topic>scan</topic>
            <ray>
                <scan>
                    <horizontal>
                        <samples>720</samples>
                        <resolution>1</resolution>
                        <min_angle>-3.14159</min_angle>
                        <max_angle>3.14159</max_angle>
                    </horizontal>
                </scan>
                <range>
                    <min>0.12</min>
                    <max>12.0</max>
                    <resolution>0.01</resolution>
                </range>
                <noise>
                    <type>gaussian</type>
                    <mean>0.0</mean>
                    <stddev>0.01</stddev>
                </noise>
            </ray>
        </sensor>
    </gazebo>
    <gazebo>
    <plugin filename="ignition-gazebo-sensors-system"
            name="ignition::gazebo::systems::Sensors">
        <render_engine>ogre2</render_engine>
    </plugin>
    </gazebo>

</robot>
